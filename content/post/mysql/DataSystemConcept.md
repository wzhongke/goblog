---
title: 数据库系统概念
date: 2017-12-23 19:22:00
categories: ["MySQL"]
tags: ["MySQL"]
draft: true
---

数据库的主要目的就是存储信息和获取信息。

## Data Abstraction
系统必须能够高效地获取数据，因此需要使用复杂的数据结构存储数据。为了简化用户同系统的交互，根据复杂性将系统分成三层：
- 物理层：描述了数据是如何被储存的
- 逻辑层：描述了数据之间的存在何种关系
- 可视层：最高级别的抽象，只描述了整个数据库的一部分

## Instance 和 Schemas
随着信息的删除和插入，数据库随着时间而变化。在特定时刻存储在数据库中的信息被称为数据库的一个**实例（Instance）**。
数据库的总体设计被称为**数据库模式**，模式基本上不会变化。
数据库模式是数据库的逻辑设计，数据库实例是给定的时间点数据库的快照。
Instance 和 Schema 之间的关系就像变量和变量名的关系，变量名基本是定的，变化的是变量的值。

## Data Models -- 数据模型
数据库结构的基础是数据模型，数据模型是一组用于描述数据、数据关系、数据语义和一致性约束的概念工具。数据模型可以被归类为一下四种：
1. 关系模型：关系模型使用表来表示数据和这些数据之间的关系。
2. 实体关系模型(E\-R)：E\-R 数据模型使用一组基本的对象（被称为实体）以及这些对象之间的关系。一个实体就是现实世界中可以与其他对象区分的“事物”或“对象”
3. 面向对象的数据模型：该模型结合了面向对象数据特性和数据关系。
4. 半结构化数据模型：该模型允许指定相同类型的单个数据项可能具有不同属性集的数据，像XML。

## Data-Manipulation Language(DML)
数据操控语言是一种用户可以按照适当的数据模型进行访问或操作数据的语言。访问基本上有四种：增删改查。

## Data-Definition Language (DDL)
数据定义语言(DDL) 是定义数据库模式的语言。DDL通常指定了数据存储结构和访问方式。
存储在数据库中的数据必须满足一定的**一致性约束**。数据库系统实现了以下完整性约束，可以以最小的开销测试：
- 域约束：域约束是完整性约束的最基本的形式，每当一个新的数据输入到数据库时，系统就会对它们进行测试。
- 参照完整性：某些情况下，我们希望确保一个给定属性集合中，出现在一个关系中的值也出现在另一个关系的一组特定属性中。（外键）
- 断言：断言是数据库必须满足的条件，域约束和参照完整性约束只是断言的一种形式。
- 授权：我们需要区分不同用户只可以访问他们有权看到的数据，即最小权限原则。一般权限有四种：读权限，插入权限，修改权限，删除权限。

DDL的输出是包含元数据的数据词典，是关于数据的数据。数据词典可以看作是只有数据库系统可以访问更新的特殊的表。

# 关系型数据库
关系型数据库是由一系列表组成的，每个表有一个唯一的名字。
关系型模型中，关系用来指代一个表，元组用来指代一行，属性用来指代表中的一列。
对于所有的关系，我们要求关系中所有属性的域都必须是原子性。如果域中的元素是不可分割的，那么域就具有原子性。重点不是域本身是什么，而是我们如何使用数据库中的域元素。电话号码可以分割成国家代码，区号和本地号，不是原子的。但是我们将电话号码作为一个不可分割的元素使用，那么电话号码就是一个原子域。

## Keys
我们需要一种区分给定关系中的不同的元组的方式，一般使用它们的属性来表示。元组的属性值的值必须能够唯一地标识元组，也就是一个关系中的任意两个元组所有属性值不能完全一样。
**superkey**是一组一个或者多个属性，这些属性组合起来能够唯一地标识关系中的一个元组。
**candidate keys** (候选键) 是可以唯一标识关系中元组的最小的属性集合，比如{ID}和 {name, dept_name}
**primary key** (主键) 是数据库设计者从候选键中选择的作为标识元组的键。选取主键应该考虑选择那些基本不变的属性。
**foreign key** (外键) 一个关系 $r\_1$ 的属性可能是另一个关系 $r\_2$ 的主键，那么我们成  $r\_1$ 的这个属性为指向 $r\_2$ 外键
**referential integrity constraint** (参照完整性约束) 要求引用关系中出现在任何元组的指定属性中的值，也需要出现在引用关系中的至少一个元组的指定属性中。

## 关系查询语言
查询语言是用户从数据库中获取信息的语言。
**连接操作(join)** 允许通过合并两个关系中对应的元组，来将两个关系组合成为一个关系。
**联合操作(union)** 将两个具有相似结果的表执行并集合操作。（比如一个毕业学生的表和一个未毕业学生的表）
**笛卡尔积** 将两个关系中的元组集合起来，但是不像连接查询，它的结果包含了两个关系的所有元组对，而不管他们的属性值是否一致。

# SQL
SQL语言包含以下几部分：
- DDL：定义表结构，删除表和修改表结构
- DML：从数据库获取信息，插入、删除、修改记录
- 完整性：DDL中定义了存储数据必须满足的完整性约束，违反完整性约束的数据是不能插入到表中的
- 视图：可以使用DDL命令定义视图
- 事务控制：SQL的DDL中包含了开始和结束事务的命令
- 嵌入SQL和动态SQL：定义了SQL语句如何嵌入到一般的编程语言中的
- 授权：DDL包含了定义表和视图的访问权限

## SQL DDL
